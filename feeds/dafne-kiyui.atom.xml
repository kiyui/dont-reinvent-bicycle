<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>dont reinvent –≤–µ–ª–æ—Å–∏–ø–µ–¥ - Dafne Kiyui</title><link href="https://dontreinventbicycle.com/" rel="alternate"></link><link href="https://dontreinventbicycle.com/feeds/dafne-kiyui.atom.xml" rel="self"></link><id>https://dontreinventbicycle.com/</id><updated>2020-08-11T00:00:00+08:00</updated><entry><title>generating video thumbnails in js</title><link href="https://dontreinventbicycle.com/canvas-thumbnail.html" rel="alternate"></link><published>2020-08-03T03:50:00+08:00</published><updated>2020-08-03T03:50:00+08:00</updated><author><name>Dafne Kiyui</name></author><id>tag:dontreinventbicycle.com,2020-08-03:/canvas-thumbnail.html</id><summary type="html">&lt;p&gt;&lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement"&gt;HTMLCanvasElement&lt;/a&gt;s are amazing for all kinds of things. Paired with the &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D"&gt;CanvasRenderingContext2D&lt;/a&gt;'s &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage"&gt;drawImage&lt;/a&gt; method, generating video thumbnails on browsers are incredibly easy. The interface for the method is as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;void ctx.drawImage(image, dx, dy);&lt;/span&gt;
&lt;span class="err"&gt;void ctx.drawImage(image, dx, dy, dWidth, dHeight);&lt;/span&gt;
&lt;span class="err"&gt;void ctx.drawImage(image ‚Ä¶&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement"&gt;HTMLCanvasElement&lt;/a&gt;s are amazing for all kinds of things. Paired with the &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D"&gt;CanvasRenderingContext2D&lt;/a&gt;'s &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage"&gt;drawImage&lt;/a&gt; method, generating video thumbnails on browsers are incredibly easy. The interface for the method is as follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="err"&gt;void ctx.drawImage(image, dx, dy);&lt;/span&gt;
&lt;span class="err"&gt;void ctx.drawImage(image, dx, dy, dWidth, dHeight);&lt;/span&gt;
&lt;span class="err"&gt;void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here, &lt;code&gt;image&lt;/code&gt; can be any &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasImageSource"&gt;CanvasImageSource&lt;/a&gt; such as a &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement"&gt;HTMLImageElement&lt;/a&gt; or even a &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement"&gt;HTMLVideoElement&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the following example, I will be generating a thumbnail from a video file. I've posted the same example to &lt;a href="https://stackblitz.com/edit/generate-video-file-thumbnail"&gt;StackBlitz&lt;/a&gt;. The HTML here is very simple, consisting of a &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement"&gt;HTMLInputElement&lt;/a&gt; where &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file"&gt;type="file"&lt;/a&gt; to get the file from the user and a &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement"&gt;HTMLImageElement&lt;/a&gt; where we will later be displaying the video thumbnail:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;app&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;row&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;input-video-file&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;file&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;accepts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;video/webm&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;row&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;img&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;img-thumb&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;alt&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Thumbnail of a video&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;row&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;style&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Getting the file is now as simple as listening to &lt;code&gt;input-video-file&lt;/code&gt;'s change event, as so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;fileInput&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;#input-video-file&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;fileInput&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;change&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;async&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;files&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We should then be able to use this file in a &lt;code&gt;HTMLVideoElement&lt;/code&gt; programmatically by doing the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;fileUrl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createObjectURL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;file&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createElement&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;video&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;src&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;fileUrl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you've appended the &lt;code&gt;video&lt;/code&gt; element to your document body, you should now be able to play to file! Drawing that same image on a canvas is now as simple as doing:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createElement&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;canvas&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;canvas&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoWidth&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoHeight&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Optimally, you'd do this after the &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/loadedmetadata_event"&gt;loadedmetadata event&lt;/a&gt; has fired, after which you can seek the video to a point of your choosing. This also ensures that the preview is already rendered in the &lt;code&gt;video&lt;/code&gt; element. In this example, I seek to 25% of the video:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;loadedmetadata&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// Seek the video to 25%&lt;/span&gt;
  &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;currentTime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;duration&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.25&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;seeked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// Draw to canvas, etc.&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Next, if we wanted to generate the video thumbnail on the frontend and perhaps save that as a file we'd probably use something along the lines of:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;// ...to get the raw pixel data&lt;/span&gt;
&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getImageData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoWidth&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoHeight&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// ...to generate a blob&lt;/span&gt;
&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toBlob&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;blob&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="cm"&gt;/* etc */&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;image/png&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;However for the purpose of this demo, we want to show it inside a &lt;code&gt;HTMLImageElement&lt;/code&gt;, for which we should generate a data URI using the &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL"&gt;HTMLCanvasElement.toDataURL&lt;/a&gt; method as so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;imageUrl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toDataURL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;image/png&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;#img-thumb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;img&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;src&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;imageUrl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Piecing all these parts together, we have the following function from the demo where given a video URL we're able to generate a URL to a thumbnail of said video, &lt;em&gt;seeked&lt;/em&gt; to 25%:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nx"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;getThumbnailForVideo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;videoUrl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createElement&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;video&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createElement&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;canvas&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;style&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;display&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;style&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;display&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;none&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// Trigger video load&lt;/span&gt;
  &lt;span class="nx"&gt;await&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Promise&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nx"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;reject&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;loadedmetadata&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoWidth&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;height&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoWidth&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;height&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="c1"&gt;// Seek the video to 25%&lt;/span&gt;
      &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;currentTime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;duration&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mf"&gt;0.25&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
    &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;addEventListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;seeked&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;src&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;videoUrl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;

  &lt;span class="c1"&gt;// Draw the thumbnail&lt;/span&gt;
  &lt;span class="nx"&gt;canvas&lt;/span&gt;
    &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;2d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoWidth&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;video&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;videoHeight&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;imageUrl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toDataURL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;image/png&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;imageUrl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, here's an &lt;a href="https://dontreinventbicycle.com/demos/canvas-thumbnail.html"&gt;onsite demo&lt;/a&gt;. I did not transpile any of the code so please use a modern browser.&lt;/p&gt;
&lt;h2&gt;caveats&lt;/h2&gt;
&lt;p&gt;I'd like to make a careful note however that this method is not perfect as it may not work with all videos on Firefox:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;drawImage()&lt;/code&gt; will ignore all EXIF metadata in images, including the Orientation. This behavior is especially troublesome on iOS devices. You should detect the Orientation yourself and use &lt;code&gt;rotate()&lt;/code&gt; to make it right.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Put simply, this means that certain mobile-device recordings may display incorrectly in the &lt;code&gt;canvas&lt;/code&gt;. As such, you may want to leverage &lt;a href="https://en.wikipedia.org/wiki/Progressive_enhancement"&gt;progressive enhancement&lt;/a&gt; and depending on your use-case and source of the videos, decide which users will be generating their thumbnails on the client side.&lt;/p&gt;
&lt;h2&gt;footnote&lt;/h2&gt;
&lt;p&gt;This post is based on my &lt;a href="https://stackoverflow.com/questions/63029738/how-do-i-correctly-draw-a-video-thumbnail-on-a-canvas-on-all-browsers/63083581"&gt;self-answered question on StackOverflow&lt;/a&gt;.&lt;/p&gt;
&lt;aside&gt;
  &lt;p&gt;I originally wanted to preface the article with something along the following lines:&lt;/p&gt;
  &lt;blockquote&gt;
    You may want to generate thumbnails of a video on the client side for a variety of reasons:
    &lt;ul&gt;
      &lt;li&gt;Displaying a thumbnail preview as a user uploads a video&lt;/li&gt;
      &lt;li&gt;Creating video seekbar previews as the user hovers it&lt;/li&gt;
      &lt;li&gt;Reduce server load by generating video thumbnails on the client side&lt;/li&gt;
    &lt;/ul&gt;
    Whatever it may be, &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement"&gt;HTMLCanvasElement&lt;/a&gt;s make it very easy!
  &lt;/blockquote&gt;
  &lt;p&gt;I decided against it because I'm starting to hate website fluff, and this seems to be especially a feature of the English language where we preface everything with foreplay. Ever tried looking up nutrition or fitness tips in English vs. Dutch/German? We talk too much, man.&lt;/p&gt;
  &lt;p&gt;Perhaps it's for SEO, which is perhaps why I'm including this rant, but I lean towards the vulgar explanation of lesser malice.&lt;/p&gt;
&lt;/aside&gt;</content><category term="code"></category><category term="javascript"></category><category term="canvas"></category><category term="firefox"></category></entry><entry><title>how i created a trigger warnings modal, and removed it for accessibility</title><link href="https://dontreinventbicycle.com/modals-and-a11y.html" rel="alternate"></link><published>2020-03-20T18:00:00+08:00</published><updated>2020-03-20T18:00:00+08:00</updated><author><name>Dafne Kiyui</name></author><id>tag:dontreinventbicycle.com,2020-03-20:/modals-and-a11y.html</id><summary type="html">&lt;p&gt;When I first had &lt;a href="/taking-a-break.html"&gt;my coming out story&lt;/a&gt; reviewed by some queer peers, the initial feedback I received was that it required "trigger warnings" because it covered some pretty heavy topics.&lt;/p&gt;
&lt;p&gt;My initial solution was simple;- add a row to the post information section highlighting the various trigger warnings in ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;When I first had &lt;a href="/taking-a-break.html"&gt;my coming out story&lt;/a&gt; reviewed by some queer peers, the initial feedback I received was that it required "trigger warnings" because it covered some pretty heavy topics.&lt;/p&gt;
&lt;p&gt;My initial solution was simple;- add a row to the post information section highlighting the various trigger warnings in the same way that I already have the article date, category, and tags displayed. Any &lt;em&gt;sane&lt;/em&gt; person would have left it there. Fortunately, I am no such person. I am a Javascript developer.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Let's add a modal!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At this point, any &lt;em&gt;sane&lt;/em&gt; person would have just coded a simple modal toggled by Javascript. Not being such I person I have imposed a simple rule for this blog, that being that it should not contain any Javascript (other than those in code blocks).&lt;/p&gt;
&lt;p&gt;The thing about imposing such a restriction is that,&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It's fun to impose arbitrary restrictions when coding, because it forces you think of unconventional solutions&lt;/li&gt;
&lt;li&gt;I don't want to have to care about "minifying" Javascript or cache invalidation of assets&lt;/li&gt;
&lt;li&gt;It adds to the nerdiness of a blog that it works just fine on a text-only browser! ü§ì&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;CSS however is fair game, so that's exactly what we're going to attempt to accomplish!&lt;/p&gt;
&lt;h2 id="using-target-pseudo-class"&gt;
  using the :target pseudo class
&lt;/h2&gt;

&lt;p&gt;Creating a modal using the &lt;code&gt;:target&lt;/code&gt; pseudo-class is the simpler, less-hacky alternative. The &lt;code&gt;:target&lt;/code&gt; pseudo-class works by selecting the current active page anchor. In the case of our modal, that would be using the "id" of the modal to change the &lt;code&gt;display&lt;/code&gt; style from &lt;code&gt;none&lt;/code&gt; to &lt;code&gt;block&lt;/code&gt;, kind of like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-target-modal&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-target-modal&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;target&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now, in order to display the modal, all we need to do is create a link that behaves like a button to trigger the modal anchor:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;#demo-target-modal&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  Show :target modal
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Using the same trick, we can simply have our modal "close" button target "#" or any other anchor in the page!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;#&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  Close :target modal
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally piecing everything together, we get a modal that looks somewhat like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demo-target-modal&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;modal&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;modal-content&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="c"&gt;&amp;lt;!-- Content --&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;#&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      Close :target modal
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;And if you're interested in the styling I used:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-target-modal&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-target-modal&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;target&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;modal&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;position&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;fixed&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;left&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;top&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="kt"&gt;%&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;height&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="kt"&gt;%&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;overflow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;auto&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;rgba&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;modal-content&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#f5f5dc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;margin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;auto&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;border&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="kc"&gt;solid&lt;/span&gt; &lt;span class="mh"&gt;#888&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="kt"&gt;%&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;modal-fake-button&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;text-decoration&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#000504&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;border&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="kt"&gt;px&lt;/span&gt; &lt;span class="kc"&gt;solid&lt;/span&gt; &lt;span class="mh"&gt;#888&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#ede5dd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;modal-fake-button&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;hover&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;modal-fake-button&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;focus&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;cursor&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;pointer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#ccbbab&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Finally, having pieced everything together, here's that demo button you're looking for!&lt;/p&gt;
&lt;p&gt;&lt;a href="#demo-target-modal" class="modal-fake-button" role="button"&gt; 
  Show :target modal
&lt;/a&gt;&lt;/p&gt;
&lt;div id="demo-target-modal" tabindex="-1" class="modal"&gt;
  &lt;div class="modal-content" tabindex="0" role="dialog" aria-labelledby="demo-target-modal-title"&gt;
    &lt;h2 id="demo-target-modal-title"&gt;:target modal&lt;/h2&gt;
    &lt;p&gt;Notice how the URL contains #demo-target-modal when it displays?&lt;/p&gt;
    &lt;a href="#using-target-pseudo-class" class="modal-fake-button" role="button"&gt;
      Close :target modal
    &lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;While the solution is elegant and works quite well, I was not able to use it because it relies on the page already being loaded with the anchor linked in order to have the modal displayed. This is not optimal on a page where I need the modal to be shown before any of the content is displayed to the user, so I had to think of another solution.&lt;/p&gt;
&lt;h2&gt;using the "checkbox hack"&lt;/h2&gt;
&lt;p&gt;The checkbox hack relies on the misuse of an accessibility function of the &lt;code&gt;label&lt;/code&gt; and &lt;code&gt;input[type="checkbox]&lt;/code&gt; element where clicking on the label would toggle the checkbox.&lt;/p&gt;
&lt;p&gt;&lt;label for="example-checkbox"&gt;
  Pressing me triggers the checkbox:
&lt;/label&gt;
&lt;input id="example-checkbox" type="checkbox" /&gt;&lt;/p&gt;
&lt;p&gt;The code for accomplishing this is quite simple, relying only on attaching the &lt;code&gt;for&lt;/code&gt; attribute to the &lt;code&gt;label&lt;/code&gt; that's supposed to trigger the checkbox like so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt; &lt;span class="na"&gt;for&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;example-checkbox&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  Pressing me triggers the checkbox:
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;example-checkbox&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;checkbox&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Using this, we now have a method in which we can open and close our modal by making use of the general sibling selector (&lt;code&gt;~&lt;/code&gt;) by doing something like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-checkbox-input&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;none&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-checkbox-input&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;checked&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt; &lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;demo-checkbox-modal&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Put together, our code looks somewhat like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt; &lt;span class="na"&gt;for&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demo-checkbox-input&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  Show checkbox modal
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;input&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demo-checkbox-input&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;checkbox&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demo-checkbox-modal&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;modal&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;modal-content&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="c"&gt;&amp;lt;!-- Content --&amp;gt;&lt;/span&gt;
      &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt; &lt;span class="na"&gt;for&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;demo-checkbox-input&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        Close checkbox modal
      &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;label&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Again, here's a demo button of the checkbox modal:&lt;/p&gt;
&lt;p&gt;&lt;label class="modal-fake-button" tabindex="0" for="demo-checkbox-input" role="button"&gt; 
  Show checkbox modal
&lt;/label&gt;&lt;/p&gt;
&lt;div&gt;
  &lt;input id="demo-checkbox-input" type="checkbox"/&gt;
  &lt;div id="demo-checkbox-modal" tabindex="-1" class="modal"&gt;
    &lt;div class="modal-content" tabindex="0" role="dialog" aria-labelledby="demo-checkbox-modal-title"&gt;
      &lt;h2 id="demo-checkbox-modal-title"&gt;checkbox modal&lt;/h2&gt;
      &lt;p&gt;Try refreshing the browser with the modal open ü§≠&lt;/p&gt;
      &lt;label class="modal-fake-button" for="demo-checkbox-input" role="button"&gt; 
        Close checkbox modal
      &lt;/label&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;If you're navigating this website with a mouse and are sighted, this looks like quite an elegant solution because:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Unlike the dialog pseudo-class, closing the modal does not jump to a random part of the page which is great for UX!&lt;/li&gt;
&lt;li&gt;By enabling &lt;code&gt;checked="true"&lt;/code&gt; on the input, I can have the modal be shown on first load&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;input&lt;/code&gt; element does double-duty by remembering the "modal state" (because your browser will remember the last input) such that when a user revisits the page they won't be prompted by the modal again&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;But you're not here because I ended up using either of these CSS tricks or hacks as solutions. The problem with the "checkbox hack" is that it relies on changing the semantics of native HTML elements such as &lt;code&gt;label&lt;/code&gt; and &lt;code&gt;input[type="checkbox"]&lt;/code&gt;, making accessibility an issue;- especially on a screen reader.&lt;/p&gt;
&lt;p&gt;In spite of not being a &lt;em&gt;sane&lt;/em&gt; person I do have another more sane rule for this blog, that being that it should be made as accessible as possible for all people. Makings websites and application accessible has been a subject that has long interested me, and I do hope to get better at it (such as being able to navigate the code blocks better)!&lt;/p&gt;
&lt;aside&gt;
  Just as a side note, it may be the case that trigger-warnings do not work at all as mentioned &lt;a href="https://web.archive.org/web/20200320172206/https://www.theatlantic.com/health/archive/2019/03/do-trigger-warnings-work/585871/"&gt;here&lt;/a&gt;.
&lt;/aside&gt;

&lt;p&gt;If you do have suggestions on how I can improve the trigger warnings, please do &lt;a href="mailto:didyouknowthat@dafne.rocks"&gt;reach out&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;This article was powered by the listenfuel of a band literally called "The World is A Beautiful Place &amp;amp; I Am No Longer Afraid To Die". Happy lockdown this Aries season ‚ôà!&lt;/p&gt;
&lt;style&gt;
  #demo-target-modal {
    display: none;
  }

  #demo-target-modal:target {
    display: block;
  }

  #demo-checkbox-modal {
    display: none;
  }

  #demo-checkbox-input {
    display: none;
  }

  #demo-checkbox-input:checked ~ #demo-checkbox-modal {
    display: block;
  }

  .modal {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.6);
  }

  .modal-content {
    background-color: #f5f5dc;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }

  .modal-fake-button {
    padding: 4px;
    text-decoration: none;
    color: #000504;
    border: 1px solid #888;
    background-color: #ede5dd;
  }

  .modal-fake-button:hover,.modal-fake-button:focus {
    cursor: pointer;
    background-color: #ccbbab;
  }
&lt;/style&gt;</content><category term="code"></category><category term="css"></category><category term="a11y"></category></entry><entry><title>on taking a break</title><link href="https://dontreinventbicycle.com/taking-a-break.html" rel="alternate"></link><published>2020-03-19T15:00:00+08:00</published><updated>2020-08-11T00:00:00+08:00</updated><author><name>Dafne Kiyui</name></author><id>tag:dontreinventbicycle.com,2020-03-19:/taking-a-break.html</id><summary type="html">
    &lt;p&gt;
      It is almost poetic justice that the last time I wrote was on Labour Day,
      2019. Not long thereafter, I went on a slurry of vacations from Bangkok
      for 2 bachelor parties, Georgia for a wedding, a multitude of places for
      Europe, finally ending my streak by attending the Pride ‚Ä¶&lt;/p&gt;</summary><content type="html">
    &lt;p&gt;
      It is almost poetic justice that the last time I wrote was on Labour Day,
      2019. Not long thereafter, I went on a slurry of vacations from Bangkok
      for 2 bachelor parties, Georgia for a wedding, a multitude of places for
      Europe, finally ending my streak by attending the Pride parade in Taipei
      üè≥‚Äçüåà
    &lt;/p&gt;
    &lt;aside&gt;
      &lt;p&gt;
        I have included some photos of my travels in this blog. All photos are
        licensed CC-BY 4.0.
        &lt;br /&gt;
        &lt;a rel="license" href="http://creativecommons.org/licenses/by/4.0/"&gt;
          &lt;img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /&gt;
        &lt;/a&gt;
      &lt;/p&gt;
    &lt;/aside&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="pride flag painted on the road in Taipei" src="https://dontreinventbicycle.com/images/taking-a-break/taipei-0.jpg" /&gt;
      &lt;img loading="lazy" alt="a view of the Taipei 101" src="https://dontreinventbicycle.com/images/taking-a-break/taipei-1.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      During this time, many things had happened but most notably that when I
      was in Berlin, I had decided to transition; I am transgender. This post
      will get pretty personal, but serves as a reminder that queer people do
      exist and highlights some of the struggles we go through. Hopefully it
      will serve as an inspiration for other queer people that are still going
      through something similar.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="the Berlin Cathedral" src="https://dontreinventbicycle.com/images/taking-a-break/berlin-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      The earliest times I can recall feelings of gender dysphoria was when I
      started to attend secondary school, age 13. Not understanding what I was
      going through, I looked up the symptoms and wondered if it had simply to
      do with me undergoing puberty. I was an already in-denial homosexual,
      knowing that I had guy crushes that I had to suppress and going out with
      girls under the peer-pressure of my friends. At the time, what I was going
      through was still called gender identity disorder.
    &lt;/p&gt;
    &lt;p&gt;
      Asian society is highly conformist and collectivist, with deviance being
      punished. I grew up in such a household as an Evangelical Christian and
      attended an all-boys school with a Christian background. It doesn't help
      that I live in Malaysia;- a country while progressive for being an Islamic
      country, is otherwise very socially backwards. This meant that there was
      no room for questioning or being open about oneself. When I first started
      going through these feelings in my head, I thought I would test my
      boundaries. Scene/emo fashion seemed to be something I could resonate with
      while being very NGC (non-gender-conforming), and allowed for a space
      where people could share how they felt. I was able to get by wearing tight
      jeans and shirts with tonnes of accessories but for my entirety of high
      school had a problem of "misbehaviour" because I refused to cut my hair
      &lt;a id="source-cut-hair" href="#note-cut-hair"&gt;[1]&lt;/a&gt;. I'd have my hair
      cut by teachers every other school assembly and resent seeing a
      hairdresser. I soon discovered the boundaries to which I could safely
      stretch when I coloured my nails. First with liquid correction fluid, and
      later actual nail polish during school break. I got called out by someone
      I knew through my church youth group during a church event and felt
      greatly embarrassed by it.
    &lt;/p&gt;
    &lt;p&gt;I remember thinking,&lt;/p&gt;
    &lt;blockquote&gt;
      &lt;p&gt;How did I allow these feelings to get so out of hand?&lt;/p&gt;
    &lt;/blockquote&gt;
    &lt;p&gt;
      This triggered my first wave of "repression"
      &lt;a id="source-repression" href="#note-repression"&gt;[2]&lt;/a&gt;, conformity. I'd
      be lying if I said I enjoyed my time alive then. I was able to keep happy
      on the surface, presenting as the best version of myself there had ever
      been. I started getting good at my grades, being actively involved in the
      debate club, and began actively participating in church activities. For
      some time I even gave my brother my computer, refusing to use it any more.
      The computer meant community, games, coding, and actively keeping myself
      happy. I wanted to withdraw from those feelings.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="the Hohensalzburg Castle" src="https://dontreinventbicycle.com/images/taking-a-break/salzburg-0.jpg" /&gt;
      &lt;img loading="lazy" alt="Munich new town hall" src="https://dontreinventbicycle.com/images/taking-a-break/munich-1.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Some time later, for
      &lt;a href="https://en.wikipedia.org/wiki/Gawai_Dayak"&gt;Gawai&lt;/a&gt;, my dad
      gifted me with my first laptop/tablet. I was able to geek out again! For a
      while, I was able to distract myself from my dysphoria, ignoring it. Those
      feelings became harder to ignore when I started developing feelings for
      another person at school that also turned out to be queer. Through them, I
      started opening up again, feeling safe to do so. I started meeting other
      queer people and felt less alone, not that I had ever truly been;- I just
      did not want to out myself by associating with the school "pondans"
      &lt;a id="source-pondan" href="#note-pondan"&gt;[3]&lt;/a&gt;. I started dressing and
      feeling like me again, albeit this time in more colour.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="Gouda town hall" src="https://dontreinventbicycle.com/images/taking-a-break/gouda-0.jpg" /&gt;
      &lt;img loading="lazy" alt="a canal in Venice" src="https://dontreinventbicycle.com/images/taking-a-break/venice-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      This period did not last long, but took years to slowly die out starting
      when I entered a cis-het relationship
      &lt;a id="source-cishet" href="#note-cishet"&gt;[4]&lt;/a&gt;. I recall telling her
      that she "had cured me of the gay", and I went through the process of
      trying to be normal. It was around this time that I entered university
      confused and not knowing what I was doing. The relationship was unhealthy
      and eventually fell apart, and I completely let myself go. I was lucky
      enough to be able to go through university without paying much attention
      to classes because I had already spent half my life being a computer nerd.
      I exposed myself to extra stress but at the very least some exposure by
      doing various gigs while at the university. I completed my final year
      project quite easily and landed my first steady income at a part-time job
      while also working as a part-time research assistant at the university
      continuing to work on my final year project.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="a church in Munich" src="https://dontreinventbicycle.com/images/taking-a-break/munich-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      A funny thing about the human mind is that we seem to desire a belief
      system or ideology to lean upon. For me, it had always been free software
      but this being around the time of cryptocurrency's boom, it became much
      more than that. I started getting involved in far more than I could handle
      and tried to distract myself from whatever underlying problems I had. The
      combinations of all these things did lend to me having quite a bit of
      money, but it also meant I was able to sustain heavy substance abuse. At
      some point I was smuggling a bottle of liquor a day to get through my work
      in the research lab.
    &lt;/p&gt;
    &lt;p&gt;
      The research lab is interesting, and what I was working on was also an
      interesting domain. I was surrounded by webcams and CCTVs. If you know
      anything about gender dysphoria, this already sounds like a terrible
      setup. I was constantly seeing myself on every screen and constantly
      resenting my existence. I tried to persist this for months until I reached
      a point where I was no longer able to work. I had to run away or stop
      existing.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="Saint Mark's Basilica" src="https://dontreinventbicycle.com/images/taking-a-break/venice-1.jpg" /&gt;
      &lt;img loading="lazy" alt="the Grand Place in Brussels" src="https://dontreinventbicycle.com/images/taking-a-break/brussels-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      One persistent dream I always had was to sail out on a boat to sea, far
      away from the sight of land and I'd drown myself. I'd wrap myself in the
      chains of an anchor and lean off the boat. One day, I received an offer
      from a friend of mine for a job as Javascript Developer based in Penang, a
      small island off the northwest coast of Peninsular Malaysia. Perhaps
      that's my chance for escape, I thought. I quit my job and left my research
      assistant role without compensation and applied for the job. Given my lack
      of suitable experience, I was offered an internship instead;- another blow
      for my confidence.
    &lt;/p&gt;
    &lt;p&gt;
      After a few weeks at the company, I still felt as if I wasn't able to
      perform up to the standards I knew I was capable of. I still struggled
      with crippling depression and the feeling of dying inside. I then decided
      to gradually delete all social media and disconnect myself from many of my
      friends. The suicide ideation in my head eventually became more strong
      than I could ever manage, and nothing I took could stop me from feeling
      that way. I was on my way home one evening from work and I knew exactly
      what I had to do that night, until I didn't. I received a call from my
      friend asking if I was alright. In spite of all the social media I had, I
      felt as if I was screaming into a void and that there was nobody
      listening. That call saved my life.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="a canal in Amsterdam" src="https://dontreinventbicycle.com/images/taking-a-break/amsterdam-0.jpg" /&gt;
      &lt;img loading="lazy" alt="behind the town hall in Gouda" src="https://dontreinventbicycle.com/images/taking-a-break/gouda-1.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      The thing about a conservative society is that you never feel safe telling
      anyone how you feel. There is no safe space for you to unwind from. In
      that position, I did not feel as if I could seek therapy or counselling
      because I feared being subjected to conversion therapy or something as
      terrible of sort.
    &lt;/p&gt;
    &lt;p&gt;
      I wish the story ended there, and that perhaps I had learned to accept
      myself, transition in attempt to relieve my dysphoria. Instead, over a
      year had gone by and I was still living with that torment over my
      shoulders. I did try to make changes, living as a gay man instead of as a
      transgender woman. At the same time, I still enjoyed "passing privilege"
      as a cis-het person because I was not too outwardly gay that it was still
      a surprise factor to people when I came out to them.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="the Victor Emmanuel II Monument" src="https://dontreinventbicycle.com/images/taking-a-break/rome-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Naturally, it only became worse. Partying, travel, self-harm, and
      substance abuse was my only remorse. My suffering was always invisible,
      until it could no longer be. Even after that particularly amazing day in
      Berlin where I was staring at myself in the mirror and thought that I
      could begin loving myself, I was unable to do so once I arrived back in
      Malaysia from my travels. The cycle and pain continued until one day when
      I was in Vietnam, I decided to end my life.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="a view from the Vatican" src="https://dontreinventbicycle.com/images/taking-a-break/rome-1.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      By some miracle, I woke up a few hours later covered in blood. For a
      while, I pretended like nothing happened. I was only back in Penang for a
      few days before I returned to my hometown, Kuching, for a metal concert
      where I told my best friends what had manifested a week before. I needed
      ears before I could accept it for myself, knowing that at least the people
      that meant the most to me were able to accept me.
    &lt;/p&gt;
    &lt;p&gt;
      I started to socially transition then, testing the waters by going by my
      "Kiyui" surname and they/them pronouns at the
      &lt;a href="http://www.polyglotconference.com/"&gt;2019 Polyglot Conference&lt;/a&gt;
      in Fukuoka. The talk, "Language, Gender, and Social Media"
      &lt;a id="source-fukuoka" href="#note-fukuoka"&gt;[5]&lt;/a&gt;, by Abe Blackburn was
      one talk in particular that stuck by me and reminded me of the importance
      of pronouns and the power in a name. A week later, I attended the pride
      parade in Taipei and had started to present as "Dafne" for the first time.
    &lt;/p&gt;
    &lt;p&gt;
      &lt;img loading="lazy" alt="the Holy Trinity Cathedral of Tbilisi" src="https://dontreinventbicycle.com/images/taking-a-break/tblisi-0.jpg" /&gt;
    &lt;/p&gt;
    &lt;p&gt;
      Many months have passed since that entire ordeal, and I'm still taking
      things day by day; Figuring out the things in life I have put in place to
      protect myself and the things I genuinely enjoy. I'd like to thank the
      folks at &lt;a href="https://piktochart.com/"&gt;Piktochart&lt;/a&gt; who've been very
      supportive throughout this process and been there for me. While I still
      &lt;em&gt;have to&lt;/em&gt; "&lt;i id="source-boymode"&gt;boymode&lt;/i&gt;"
      &lt;a id="source-boymode" href="#note-boymode"&gt;[6]&lt;/a&gt;
      when going to the office and am still often misgendered with he/him
      pronouns, it's better than I could have ever asked for.
    &lt;/p&gt;
    &lt;p&gt;
      Still though, I wonder and worry for the future of Malaysia where LGBT
      individuals continue to be silenced and prosecuted, especially those of
      the Muslim faith. I do not know the future of myself and many others in
      this country, where even the 2019 Women's March saw backlash
      &lt;a id="source-women-march" href="#note-women-march"&gt;[7]&lt;/a&gt;
      due to the involvement of LGBT folks. I cannot even personally foresee my
      future in this country where public opinion is still fuelled by hatred,
      intolerance, and bigotry.
    &lt;/p&gt;
    &lt;h2&gt;notes&lt;/h2&gt;
    &lt;ul class="links-list"&gt;
      &lt;li id="note-cut-hair"&gt;
        &lt;p&gt;
          &lt;a href="#source-cut-hair"&gt;[1]&lt;/a&gt;
          Outside of religious exemptions such as being
          &lt;a href="https://en.wikipedia.org/wiki/Sikhs"&gt;Sikh&lt;/a&gt;, boys had to
          have short hair.
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-repression"&gt;
        &lt;p&gt;
          &lt;a href="#source-repression"&gt;[2]&lt;/a&gt;
          To suppress or repress the feelings. In the trans community, usually
          to hide your feelings in fear of persecution or backlash.
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-pondan"&gt;
        &lt;p&gt;
          &lt;a href="#source-pondan"&gt;[3]&lt;/a&gt;
          The word "pondan" is a Malay slur for the word "faggot".
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-cishet"&gt;
        &lt;p&gt;
          &lt;a href="#source-cishet"&gt;[4]&lt;/a&gt;
          A cisgender heterosexual;- "normal" person.
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-fukuoka"&gt;
        &lt;p&gt;
          &lt;a href="#source-fukuoka"&gt;[5]&lt;/a&gt;
          &lt;a href="https://www.youtube.com/watch?v=PctaZZ8pkrU"&gt;[YouTube]&lt;/a&gt;.
          Sorry, no free sources found!
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-boymode"&gt;
        &lt;p&gt;
          &lt;a href="#source-boymode"&gt;[6]&lt;/a&gt;
          Present as a male or in androgynous wear
        &lt;/p&gt;
      &lt;/li&gt;
      &lt;li id="note-women-march"&gt;
        &lt;p&gt;
          &lt;a href="#source-women-march"&gt;[7]&lt;/a&gt;
          Opposition to women's march:
        &lt;/p&gt;
        &lt;ul&gt;
          &lt;li&gt;
            &lt;a href="https://web.archive.org/web/20200309145939/https://www.freemalaysiatoday.com/category/nation/2019/03/20/it-was-a-womens-march-not-lgbt-says-mp/"&gt;It was a women‚Äôs march, not LGBT, says MP&lt;/a&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;a href="https://web.archive.org/web/20200309145844/https://www.thestar.com.my/news/nation/2019/03/10/womens-group-disappointed-by-govt-backlash-over-support-for-lgbt-community/"&gt;Women's group disappointed by govt backlash over support for LGBT
              community during rally&lt;/a&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;a href="https://web.archive.org/web/20200309145918/https://www.nst.com.my/news/nation/2019/03/467792/uproar-malaysia-over-lgbt-groups-womens-day-march"&gt;Uproar in Malaysia over LGBT groups at Women's Day march&lt;/a&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  </content><category term="personal"></category><category term="meta"></category><category term="personal"></category><category term="lgbt"></category></entry></feed>